export const runtime = 'edge';

export async function GET(request: Request) {
    const { searchParams } = new URL(request.url);

    // We sometimes artificially delay a reponse for demo purposes.
    // Don't do this in real life :)
    const delay = searchParams.get('delay');

    if (delay) {
        await new Promise(resolve => setTimeout(resolve, Number(delay)));
    }

    const id = searchParams.get('id');

    if (id) {
        let entry = data.find(entry => String(entry.id) === String(id));

        return new Response(JSON.stringify(entry), {
            status: 200,
            headers: {
                'content-type': 'application/json',
            },
        });
    }

    const journalId = searchParams.get('journalId');

    if (journalId) {
        let entries = data.filter(entry => String(entry.journalId) === String(journalId));

        return new Response(JSON.stringify(entries), {
            status: 200,
            headers: {
                'content-type': 'application/json',
            },
        });
    }

    return new Response(null, {
        status: 404,
        headers: {
            'content-type': 'application/json',
        },
    });
}

const data = [
    {
        id: 1,
        date: '2023-04-11T16:09:10Z',
        amount: 7204,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 2,
        date: '2022-11-19T04:00:39Z',
        amount: 2410,
        account: 1010,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 3,
        date: '2022-11-05T14:03:58Z',
        amount: 984,
        account: 2210,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 4,
        date: '2022-08-27T03:17:37Z',
        amount: 8451,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 5,
        date: '2022-06-14T08:36:09Z',
        amount: 6767,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 6,
        date: '2023-01-08T03:41:43Z',
        amount: 8397,
        account: 1026,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 7,
        date: '2022-12-29T05:49:28Z',
        amount: 8428,
        account: 1026,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 8,
        date: '2022-11-27T22:49:52Z',
        amount: 6149,
        account: 1026,
        vatCode: null,
        journalId: null,
    },
    {
        id: 9,
        date: '2023-03-03T14:07:28Z',
        amount: 1792,
        account: 1020,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 10,
        date: '2022-06-10T22:49:46Z',
        amount: 2721,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 11,
        date: '2022-10-17T23:00:13Z',
        amount: 3558,
        account: 2210,
        vatCode: null,
        journalId: null,
    },
    {
        id: 12,
        date: '2023-01-11T08:07:23Z',
        amount: 4668,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 13,
        date: '2022-06-13T20:01:20Z',
        amount: 3582,
        account: 1021,
        vatCode: null,
        journalId: 2,
    },
    {
        id: 14,
        date: '2023-02-27T15:03:59Z',
        amount: 8123,
        account: 1010,
        vatCode: 'UEUV',
        journalId: 2,
    },
    {
        id: 15,
        date: '2022-07-11T07:23:36Z',
        amount: 3442,
        account: 1026,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 16,
        date: '2023-03-07T15:50:48Z',
        amount: 1459,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 17,
        date: '2022-06-22T21:29:13Z',
        amount: 9066,
        account: 1025,
        vatCode: null,
        journalId: null,
    },
    {
        id: 18,
        date: '2022-10-19T07:13:27Z',
        amount: 5275,
        account: 2210,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 19,
        date: '2022-10-20T15:19:32Z',
        amount: 6514,
        account: 1021,
        vatCode: null,
        journalId: 2,
    },
    {
        id: 20,
        date: '2022-09-04T11:55:36Z',
        amount: 9194,
        account: 2210,
        vatCode: null,
        journalId: 2,
    },
    {
        id: 21,
        date: '2023-01-19T01:07:29Z',
        amount: 1500,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 22,
        date: '2022-07-04T06:28:18Z',
        amount: 4718,
        account: 1010,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 23,
        date: '2023-01-24T02:28:48Z',
        amount: 8826,
        account: 2210,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 24,
        date: '2022-11-03T07:55:40Z',
        amount: 5830,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 25,
        date: '2023-03-07T03:08:58Z',
        amount: 2358,
        account: 2210,
        vatCode: null,
        journalId: 2,
    },
    {
        id: 26,
        date: '2022-06-12T20:51:07Z',
        amount: 4645,
        account: 2210,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 27,
        date: '2022-11-04T14:52:41Z',
        amount: 8488,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 28,
        date: '2022-09-05T11:09:16Z',
        amount: 2764,
        account: 1020,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 29,
        date: '2023-03-19T00:10:02Z',
        amount: 9764,
        account: 1010,
        vatCode: 'U25',
        journalId: 2,
    },
    {
        id: 30,
        date: '2022-06-20T10:20:39Z',
        amount: 2079,
        account: 1020,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 31,
        date: '2022-11-03T17:28:06Z',
        amount: 6035,
        account: 1025,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 32,
        date: '2022-06-18T07:56:11Z',
        amount: 335,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 33,
        date: '2022-08-14T23:38:05Z',
        amount: 358,
        account: 1010,
        vatCode: 'UY0',
        journalId: 1,
    },
    {
        id: 34,
        date: '2023-05-31T18:41:51Z',
        amount: 9442,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 35,
        date: '2022-09-25T08:01:03Z',
        amount: 3274,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 36,
        date: '2022-09-04T12:51:06Z',
        amount: 9570,
        account: 1021,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 37,
        date: '2023-02-10T13:49:38Z',
        amount: 2494,
        account: 2210,
        vatCode: null,
        journalId: null,
    },
    {
        id: 38,
        date: '2023-03-26T11:07:12Z',
        amount: 5880,
        account: 2210,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 39,
        date: '2023-01-10T14:48:58Z',
        amount: 3309,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 40,
        date: '2022-08-22T20:18:59Z',
        amount: 4665,
        account: 1021,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 41,
        date: '2022-12-19T21:29:58Z',
        amount: 4868,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 42,
        date: '2022-08-18T21:25:40Z',
        amount: 9946,
        account: 1026,
        vatCode: 'UY0',
        journalId: 2,
    },
    {
        id: 43,
        date: '2023-02-12T07:32:55Z',
        amount: 931,
        account: 1025,
        vatCode: 'UY0',
        journalId: 2,
    },
    {
        id: 44,
        date: '2022-08-24T12:26:24Z',
        amount: 3126,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 45,
        date: '2023-03-10T05:00:08Z',
        amount: 7604,
        account: 1026,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 46,
        date: '2023-04-17T16:20:15Z',
        amount: 52,
        account: 1010,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 47,
        date: '2022-10-11T07:57:56Z',
        amount: 3565,
        account: 1010,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 48,
        date: '2023-02-26T14:30:33Z',
        amount: 6079,
        account: 2210,
        vatCode: null,
        journalId: null,
    },
    {
        id: 49,
        date: '2023-05-06T20:31:45Z',
        amount: 846,
        account: 2210,
        vatCode: null,
        journalId: null,
    },
    {
        id: 50,
        date: '2023-02-15T08:10:46Z',
        amount: 4166,
        account: 2210,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 51,
        date: '2022-09-16T21:05:50Z',
        amount: 6005,
        account: 1021,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 52,
        date: '2023-04-23T08:56:12Z',
        amount: 8519,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 53,
        date: '2023-04-24T21:16:16Z',
        amount: 9781,
        account: 1025,
        vatCode: null,
        journalId: null,
    },
    {
        id: 54,
        date: '2022-06-03T11:14:48Z',
        amount: 4234,
        account: 1020,
        vatCode: 'Abr',
        journalId: 2,
    },
    {
        id: 55,
        date: '2023-02-20T15:03:28Z',
        amount: 4821,
        account: 1026,
        vatCode: null,
        journalId: null,
    },
    {
        id: 56,
        date: '2022-09-21T15:32:21Z',
        amount: 6029,
        account: 1010,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 57,
        date: '2022-08-02T00:27:45Z',
        amount: 3058,
        account: 1026,
        vatCode: null,
        journalId: null,
    },
    {
        id: 58,
        date: '2023-02-21T12:01:04Z',
        amount: 4824,
        account: 1020,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 59,
        date: '2022-09-16T13:49:54Z',
        amount: 7860,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 60,
        date: '2022-10-01T15:48:57Z',
        amount: 2860,
        account: 1026,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 61,
        date: '2022-12-18T05:14:27Z',
        amount: 5781,
        account: 1025,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 62,
        date: '2023-01-15T01:41:44Z',
        amount: 2183,
        account: 1021,
        vatCode: null,
        journalId: null,
    },
    {
        id: 63,
        date: '2022-07-20T03:25:07Z',
        amount: 2899,
        account: 1026,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 64,
        date: '2023-02-20T15:36:45Z',
        amount: 9980,
        account: 1010,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 65,
        date: '2022-08-31T20:22:26Z',
        amount: 9073,
        account: 1025,
        vatCode: null,
        journalId: 2,
    },
    {
        id: 66,
        date: '2023-02-17T23:04:01Z',
        amount: 4727,
        account: 1025,
        vatCode: null,
        journalId: null,
    },
    {
        id: 67,
        date: '2023-04-09T17:58:00Z',
        amount: 7766,
        account: 1025,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 68,
        date: '2023-02-04T05:58:29Z',
        amount: 7590,
        account: 1025,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 69,
        date: '2023-01-20T22:12:22Z',
        amount: 1275,
        account: 1010,
        vatCode: null,
        journalId: 1,
    },
    {
        id: 70,
        date: '2023-04-26T14:18:38Z',
        amount: 281,
        account: 1020,
        vatCode: 'Abr',
        journalId: 1,
    },
    {
        id: 71,
        date: '2022-07-17T08:36:57Z',
        amount: 6955,
        account: 1010,
        vatCode: null,
        journalId: null,
    },
    {
        id: 72,
        date: '2022-10-26T21:31:32Z',
        amount: 551,
        account: 1025,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 73,
        date: '2022-07-16T07:49:27Z',
        amount: 1711,
        account: 1010,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 74,
        date: '2023-01-23T03:21:19Z',
        amount: 5067,
        account: 1020,
        vatCode: null,
        journalId: null,
    },
    {
        id: 75,
        date: '2023-05-22T03:00:10Z',
        amount: 32,
        account: 1010,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 76,
        date: '2023-05-26T20:02:06Z',
        amount: 7534,
        account: 1025,
        vatCode: null,
        journalId: null,
    },
    {
        id: 77,
        date: '2022-11-26T02:26:56Z',
        amount: 5606,
        account: 1020,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 78,
        date: '2023-01-24T14:37:10Z',
        amount: 6161,
        account: 1021,
        vatCode: 'U25',
        journalId: 1,
    },
    {
        id: 79,
        date: '2023-03-31T17:27:38Z',
        amount: 9785,
        account: 1025,
        vatCode: 'U25',
        journalId: null,
    },
    {
        id: 80,
        date: '2022-11-20T21:45:35Z',
        amount: 9503,
        account: 1021,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 81,
        date: '2022-08-04T05:02:38Z',
        amount: 6369,
        account: 1020,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 82,
        date: '2023-02-17T15:12:45Z',
        amount: 621,
        account: 1026,
        vatCode: 'Abr',
        journalId: null,
    },
    {
        id: 83,
        date: '2022-06-30T06:07:01Z',
        amount: 5641,
        account: 1025,
        vatCode: 'UY0',
        journalId: null,
    },
    {
        id: 84,
        date: '2022-08-30T04:07:37Z',
        amount: 1390,
        account: 1010,
        vatCode: 'UEUV',
        journalId: null,
    },
    {
        id: 85,
        date: '2023-02-20T08:48:28Z',
        amount: 6150,
        account: 2210,
        vatCode: 'U25',
        journalId: 2,
    },
];
